<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Test API</title>
</head>

<body>
    <button id="btnLogin">Login</button>
    <button id="btnGetCentral">Get Central List</button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.1/axios.min.js"></script>
    <script type="text/javascript">
        const instance = axios.create({
            baseURL: 'https://devapi.cfibilling.com', // Base URL for your API
            withCredentials: true // Ensures cookies are sent with the request
        });

        async function login() {
            try {
                const response = await instance.post('/login', {
                    cc: 'EZ',
                    user: 'API$EZtest',
                    password: 'Cust0mR3po'
                });

                console.log("Login successful");
                console.log(response.data);
            } catch (error) {
                console.error("Error during login", error.response?.data || error.message);
            }
        }

        async function getCentralList() {
            try {
                const response = await instance.post('/dbCentralList', {},{withCredentials: true});
                console.log("Central list retrieved", response.data);
            } catch (error) {
                console.error("Error fetching central list", error.response?.data || error.message);
            }
        }

        document.getElementById('btnLogin').addEventListener('click', async () => {
            await login();
        });

        document.getElementById('btnGetCentral').addEventListener('click', async () => {
            await getCentralList();
        });
    </script>
</body>

</html>
